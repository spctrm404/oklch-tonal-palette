@use 'sass:math';

$length-min: 6.25rem;
$thickness-min: 2.5rem;
$border-thickness: 0.0625rem;
$thumb-size: 3rem;
$thumb-icon-size: 1rem;
$thumb-icon-thickness: 0.125rem;
$thumb-icon-border-radius: 0.5rem;
$shadow: 0.5 * math.sqrt(2) * 0.0625rem 0.5 * math.sqrt(2) * 0.0625rem 0.125rem
    0 oklch(0% 0 0deg / 30%),
  0.5 * math.sqrt(2) * 0.0625rem 0.5 * math.sqrt(2) * 0.0625rem 0.1875rem
    0.0625rem oklch(0% 0 0deg / 15%);
$shadow-hover: 0.5 * math.sqrt(2) * 0.0625rem 0.5 * math.sqrt(2) * 0.0625rem
    0.125rem 0 oklch(0% 0 0deg / 30%),
  2 * 0.5 * math.sqrt(2) * 0.0625rem 2 * 0.5 * math.sqrt(2) * 0.0625rem 0.375rem
    0.125rem oklch(0% 0 0deg / 15%);
$shadow-pressed: 0 0 0 0 oklch(0% 0 0deg / 15%), 0 0 0 0 oklch(0% 0 0deg / 30%);

.slider {
  position: relative;
  background-color: aqua;
  border: $border-thickness solid #000;

  &-x {
    width: 100%;
    min-width: $length-min + 2 * $border-thickness;
    height: $thickness-min + 2 * $border-thickness;
  }

  &-y {
    width: $thickness-min + 2 * $border-thickness;
    height: 100%;
    min-height: $length-min + 2 * $border-thickness;
  }

  &-xy {
    width: 100%;
    min-width: $length-min + 2 * $border-thickness;
    height: 100%;
    min-height: $length-min + 2 * $border-thickness;
  }
}

.track {
  position: absolute;

  @at-root .slider-x #{&} {
    inset: 0 -0.5 * $thumb-size 0 -0.5 * $thumb-size;
  }

  @at-root .slider-y #{&} {
    inset: -0.5 * $thumb-size 0 -0.5 * $thumb-size 0;
  }

  @at-root .slider-xy #{&} {
    inset: -0.5 * $thumb-size;
  }
}

.thumb {
  --x-from: 0;
  --x-to: 24;
  --y-from: 0;
  --y-to: 24;

  position: absolute;
  top: 0;
  left: 0;
  width: $thumb-size;
  height: $thumb-size;
  cursor: grab;

  &::before {
    position: absolute;
    inset: calc(0.5 * ($thumb-size - $thumb-icon-size));
    display: block;
    content: '';
    border: $thumb-icon-thickness solid #000;
    box-shadow: $shadow;
    transition: box-shadow ease-out 150ms;
    transform: rotate(45deg);
  }

  @at-root .slider-x #{&} {
    top: calc(100% - 0.5 * $thumb-size);
    left: calc(var(--x-from) * 1px);

    &-from {
      &::before {
        border-radius: 0 0 0 $thumb-icon-border-radius;
      }
    }

    &-to {
      left: calc(var(--x-to) * 1px);

      &::before {
        border-radius: 0 $thumb-icon-border-radius 0 0;
      }
    }
  }

  @at-root .slider-x.slider-mirrored #{&} {
    top: -0.5 * $thumb-size;
  }

  @at-root .slider-y #{&} {
    top: calc(var(--y-from) * 1px);
    left: -0.5 * $thumb-size;

    &-from {
      &::before {
        border-radius: $thumb-icon-border-radius 0 0;
      }
    }

    &-to {
      top: calc(var(--y-to) * 1px);

      &::before {
        border-radius: 0 0 $thumb-icon-border-radius;
      }
    }
  }

  @at-root .slider-y.slider-mirrored #{&} {
    left: calc(100% - 0.5 * $thumb-size);
  }

  @at-root .slider-xy #{&} {
    top: calc(var(--y-from) * 1px);
    left: calc(var(--x-from) * 1px);
  }

  &:hover {
    &::before {
      box-shadow: $shadow-hover;
    }
  }

  &.thumb-pressed {
    &::before {
      box-shadow: $shadow-pressed;
    }
  }
}
